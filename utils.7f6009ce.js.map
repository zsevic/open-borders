{"version":3,"sources":["scripts/constants.js","scripts/utils.js"],"names":["CLOSED_BORDER","NEGATIVE_TEST_REQUIRED","NO_TEST_REQUIRED","QUARANTINE_REQUIRED","COUNTRY_TYPES","OBJECT_STORE","IDB_DATABASE_NAME","IDB_DATABASE_VERSION","titleCase","text","split","map","item","toLowerCase","charAt","substring","join","hideLoader","document","getElementById","innerHTML","isFacebookApp","ua","navigator","userAgent","vendor","window","opera","indexOf","isInstagramApp","match","adaptCSSBrowser","$","css","loadCountriesHtml","countries","length","groups","reduce","acc","current","status","push","forEach","type","countriesByType","countriesByTypeBadge","countriesByTypeInfo","countriesByTypeTab","countriesByTypeTabBadge","countriesByTypeTabInfo","name","countryName","info","countryInfo","flag","countryHtml","countriesByTypeStyleDisplay","style","display","resetCountriesHtml","setActiveTab","i","countriesByTypeCounter","filter","call","children","element","classList","contains","click","setBorderTopClassForFirstCountryElement","firstCountryTabElement","otherCountryTabElements","firstCountryElement","otherCountryElements","add","countryElement","remove","setCountryCounter","setCountryDatalist","countryDatalistSet","src","Object","fromEntries","Array","from","index","autocomplete","dropdownClass","highlightClass","maximumItems","onSelectItem","searchHandler","source","treshold","getAllCountries","countryList","country","parentElement","hide","event","chosenCountry","label","value","target","querySelectorAll","show","gtag","event_category","event_label","Set","startsWith","trim"],"mappings":"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","file":"utils.7f6009ce.js","sourceRoot":"../src","sourcesContent":["const CLOSED_BORDER = 'CLOSED_BORDER';\nconst NEGATIVE_TEST_REQUIRED = 'NEGATIVE_TEST_REQUIRED';\nconst NO_TEST_REQUIRED = 'NO_TEST_REQUIRED';\nconst QUARANTINE_REQUIRED = 'QUARANTINE_REQUIRED';\n\nexport const COUNTRY_TYPES = [CLOSED_BORDER, NEGATIVE_TEST_REQUIRED,\n  NO_TEST_REQUIRED, QUARANTINE_REQUIRED];\n\nexport const OBJECT_STORE = 'otvorene-granice';\nexport const IDB_DATABASE_NAME = `${OBJECT_STORE}-store`;\nexport const IDB_DATABASE_VERSION = 1;\n","import { COUNTRY_TYPES } from './constants';\n\nconst titleCase = (text) => text.split(' ').map((item) => {\n  if (item === 'I') return item.toLowerCase();\n  if (item === 'SAD') return item;\n  return item.charAt(0) + item.substring(1).toLowerCase();\n}).join(' ');\n\nexport const hideLoader = () => {\n  const loader = document.getElementById('loader');\n  loader.innerHTML = '';\n};\n\nconst isFacebookApp = () => {\n  const ua = navigator.userAgent || navigator.vendor || window.opera;\n  return (ua.indexOf('FBAN') > -1) || (ua.indexOf('FBAV') > -1);\n};\n\nconst isInstagramApp = () => navigator.userAgent.match(/instagram/i);\n\nexport const adaptCSSBrowser = () => {\n  if (isFacebookApp() || isInstagramApp()) {\n    $('.group-tabs').css('font-size', '12px');\n  }\n};\n\nexport const loadCountriesHtml = (countries) => {\n  if (countries.length === 0) return;\n\n  hideLoader();\n  const groups = countries.reduce((acc, current) => {\n    if (acc[current.status]) acc[current.status].push(current);\n    else acc[current.status] = [current];\n    return acc;\n  }, {});\n  COUNTRY_TYPES.forEach((type) => {\n    const countriesByType = document.getElementById(type);\n    const countriesByTypeBadge = document.getElementById(`${type}_BADGE`);\n    const countriesByTypeInfo = document.getElementById(`${type}_INFO`);\n    const countriesByTypeTab = document.getElementById(`${type}_TAB`);\n    const countriesByTypeTabBadge = document.getElementById(`${type}_TAB_BADGE`);\n    const countriesByTypeTabInfo = document.getElementById(`${type}_TAB_INFO`);\n    groups[type]?.forEach(({ name: countryName, info: countryInfo, flag }) => {\n      const countryHtml = `<div class=\"list-group-item list-group-item-action flex-column align-items-start\">\n      <div class=\"d-flex w-100 justify-content-between\">\n        <h5 class=\"mb-1 text-info country\">${flag} ${titleCase(countryName)}</h5>\n        </div>\n        <p class=\"mb-1 text-muted\" style=\"word-wrap:break-word\">${countryInfo}</p></div>`;\n      countriesByType.innerHTML += countryHtml;\n      countriesByTypeTab.innerHTML += countryHtml;\n    });\n    const { length } = groups[type];\n    const countriesByTypeStyleDisplay = length > 0 ? 'none' : '';\n    countriesByTypeInfo.style.display = countriesByTypeStyleDisplay;\n    countriesByTypeTabInfo.style.display = countriesByTypeStyleDisplay;\n    countriesByTypeBadge.innerHTML = length;\n    countriesByTypeTabBadge.innerHTML = length;\n  });\n};\n\nexport const resetCountriesHtml = () => {\n  COUNTRY_TYPES.forEach((type) => {\n    const countriesByType = document.getElementById(type);\n    const countriesByTypeTab = document.getElementById(`${type}_TAB`);\n\n    countriesByType.innerHTML = '';\n    countriesByTypeTab.innerHTML = '';\n  });\n};\n\nconst setActiveTab = () => {\n  for (let i = 0; i < COUNTRY_TYPES.length; i += 1) {\n    const type = COUNTRY_TYPES[i];\n    const countriesByTypeCounter = [].filter\n      .call(document.getElementById(`${type}_TAB`).children, (element) => element.style.display !== 'none')\n      .length;\n    if (countriesByTypeCounter !== 0 && document.getElementById(`${type}_TAB_LINK`).classList.contains('active')) return;\n    if (countriesByTypeCounter !== 0) {\n      return document.getElementById(`${type}_TAB_LINK`).click();\n    }\n  }\n};\n\nconst setBorderTopClassForFirstCountryElement = () => {\n  COUNTRY_TYPES.forEach((type) => {\n    const [firstCountryTabElement, ...otherCountryTabElements] = [].filter\n      .call(document.getElementById(`${type}_TAB`).children, (element) => element.style.display !== 'none');\n    const [firstCountryElement, ...otherCountryElements] = [].filter\n      .call(document.getElementById(type).children, (element) => element.style.display !== 'none');\n\n    if (!firstCountryElement || !firstCountryTabElement) return;\n\n    firstCountryTabElement.classList.add('border-top');\n    firstCountryElement.classList.add('border-top');\n    const countryElements = [...otherCountryElements, ...otherCountryTabElements];\n\n    countryElements.forEach((countryElement) => {\n      countryElement.classList.remove('border-top');\n    });\n  });\n};\n\nconst setCountryCounter = () => {\n  COUNTRY_TYPES.forEach((type) => {\n    const countriesByTypeCounter = [].filter\n      .call(document.getElementById(type).children, (element) => element.style.display !== 'none')\n      .length;\n    const countriesByTypeBadge = document.getElementById(`${type}_BADGE`);\n    const countriesByTypeTabBadge = document.getElementById(`${type}_TAB_BADGE`);\n    const countriesByTypeInfo = document.getElementById(`${type}_INFO`);\n    const countriesByTypeTabInfo = document.getElementById(`${type}_TAB_INFO`);\n    const countriesByTypeStyleDisplay = countriesByTypeCounter > 0 ? 'none' : '';\n    countriesByTypeInfo.style.display = countriesByTypeStyleDisplay;\n    countriesByTypeTabInfo.style.display = countriesByTypeStyleDisplay;\n    countriesByTypeBadge.innerHTML = countriesByTypeCounter;\n    countriesByTypeTabBadge.innerHTML = countriesByTypeCounter;\n  });\n};\n\nconst setCountryDatalist = (countryDatalistSet) => {\n  const src = Object.fromEntries(Array.from(countryDatalistSet)\n    .map((name, index) => {\n      const [countryName] = name.split(' (');\n      return [countryName, index + 1];\n    }));\n\n  $('#input-search').autocomplete({\n    dropdownClass: 'dropdown-menu w-100',\n    highlightClass: 'text-info',\n    maximumItems: 5,\n    onSelectItem: searchHandler, // eslint-disable-line\n    source: src,\n    treshold: 1,\n  });\n};\n\nexport const getAllCountries = (countryList) => {\n  countryList.forEach((country) => {\n    country.parentElement.parentElement.style.display = '';\n  });\n  setCountryCounter();\n  setBorderTopClassForFirstCountryElement();\n  $('#btn-clear').hide();\n};\n\nexport const searchHandler = (event) => {\n  const chosenCountry = event?.label;\n  const value = event?.target?.value || chosenCountry;\n  const countryList = document.querySelectorAll('.country');\n  if (!value) {\n    return getAllCountries(countryList);\n  }\n  $('#btn-clear').show();\n\n  if (chosenCountry && process.env.NODE_ENV !== 'development') {\n    gtag('event', 'click', {\n      event_category: 'country',\n      event_label: chosenCountry,\n    });\n  }\n\n  const countryDatalistSet = new Set();\n  countryList.forEach((country) => {\n    const [, ...name] = country.innerHTML.split(' ');\n    const countryName = name.join(' ');\n    const countryNameStartsWithValue = countryName.toLowerCase()\n      .startsWith(value.toLowerCase().trim());\n\n    if (countryNameStartsWithValue) {\n      if (chosenCountry) {\n        country.parentElement.parentElement.style.display = '';\n      }\n      countryDatalistSet.add(countryName);\n    } else if (chosenCountry) {\n      country.parentElement.parentElement.style.display = 'none';\n    }\n  });\n\n  setCountryDatalist(countryDatalistSet);\n  if (chosenCountry) {\n    setActiveTab();\n  }\n  setCountryCounter();\n  setBorderTopClassForFirstCountryElement();\n};\n"]}